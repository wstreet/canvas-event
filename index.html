<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #msg {
            width: 50%;
            display: inline-block;
            height: 90vh;
            overflow: auto;
        }
    </style>
</head>

<body>
    <canvas id="canvas" height="300"></canvas>
    <div id="msg"></div>
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.21/lodash.core.js"></script>
<script type="module">
    import Canvas from './canvas.js'
    const msgContainer = document.querySelector('#msg')

    function log(text) {
        const textNode = document.createTextNode(text)
        const div = document.createElement('div')
        div.appendChild(textNode)
        msgContainer.appendChild(div)
    }

    const canvas = new Canvas(document.querySelector('#canvas'))
    const rect1 = canvas.addShape('rect', {
        x: 0,
        y: 0,
        width: 150,
        height: 50,
        fillStyle: '#ccc'
    })

    rect1.on('click', (event) => {
        console.log(event)
        log('rect1 click')
    })


    const rect2 = canvas.addShape('rect', {
        x: 0,
        y: 50,
        width: 100,
        height: 50,
        fillStyle: '#333'
    })

    rect2.on('mousedown', (event) => {
        log('rect2 mousedown')
    })

    rect2.on('mouseup', () => {
        log('rect2 mouseup')
    })


    canvas.addShape('polygon', {
        points: [
            [40,  110],
            [60, 180],
            [40, 200],
            [10, 180]
        ],
        fillStyle: '#ccc'
    })


    canvas.on('click', () => {
        log('canvas click')
    })


    canvas.draw()
</script>

</html>